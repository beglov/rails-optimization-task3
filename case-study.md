# Оптимизация импорта данных

## Задача

Нужно оптимизировать механизм перезагрузки расписания из файла так, чтобы он импортировал файл `large.json` в пределах минуты.

## Рабочий процесс

Для начала я решил узнать за какое время выполняется импорт данных в текущей реализации.
Получилось что импорт файла `medium.json` выполняется 58 секунд.
Соответственно импорт файла `large.json` будет выполняться сильно дольше и мы не уложимся в бюджет.

Профилировщики показывают что основное время тратится на методах относящихся к соединению с БД.
Следовательно можно уменьшить время выполнения программы сократив количесво транзакций с БД, с чем может помочь гем `activerecord-import`.

После переписывания программы с использованием гема импорт файла `medium.json` занимает менее 4 секунд:
```bash
# bin/rake reload_json[fixtures/medium.json]
Finish in 3.53
```
а импорт файла `large.json` менее 30 секунд:
```bash
# bin/rake reload_json[fixtures/large.json]
Finish in 28.93
```

Метрика укладывается в бюджет, задача выполнена.

# Оптимизация отображения расписаний